<ion-header>
  <ion-toolbar>
    <img id="img_toolbar" src="../../assets/Tenedores.png" width="13%" />
    <ion-button id="btn_toolbar"
      ><ion-icon name="arrow-undo"></ion-icon
    ></ion-button>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding" [fullscreen]="true">
  <div class="contenedor">
    <ion-grid>
      <div class="titulo_form">
        <img src="../../assets/manager.png" width="60" height="60" />
        <h2>Alta de {{perfil}}</h2>
      </div>
      <div class="row mb-3">
        <div class="col-4">
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="radio"
              id="due単o"
              checked
              (change)="cambiarPerfil('Due単o')"
            />
            <label class="form-check-label" for="due単o">Due単o</label>
          </div>
        </div>
        <div class="col-4">
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="radio"
              id="supervisor"
              (change)="cambiarPerfil('Supervisor')"
            />
            <label class="form-check-label" for="supervisor">
              Supervisor
            </label>
          </div>
        </div>
      </div>
      <form [formGroup]="formRegistro" (ngSubmit)="registrarUsuario()">
        <ion-input
          formControlName="nombre"
          type="text"
          placeholder="Nombre"
          [ngClass]="{'error-borde mb-0': (nombre.dirty || nombre.touched) && nombre.errors}"
        ></ion-input>
        <ion-input
          formControlName="apellido"
          type="text"
          placeholder="Apellido"
          [ngClass]="{'error-borde mb-0': (apellido.dirty || apellido.touched) && apellido.errors}"
        ></ion-input>
        <ion-row class="pe-1">
          <ion-col>
            <ion-input
              formControlName="dni"
              type="text"
              placeholder="DNI"
              class="me-1"
              [ngClass]="{'error-borde mb-0': (dni.dirty || dni.touched) && dni.errors}"
            ></ion-input>
          </ion-col>
          <ion-col>
            <ion-input
              formControlName="cuil"
              type="text"
              placeholder="CUIL"
              class="ms-1"
              [ngClass]="{'error-borde mb-0': (cuil.dirty || cuil.touched) && (cuil.errors || formRegistro.errors?.cuilIncorrecto)}"
            ></ion-input>
          </ion-col>
        </ion-row>

        <ion-input
          formControlName="correo"
          type="text"
          placeholder="Correo"
          class="mb-0"
          [ngClass]="{'error-borde mb-0': (correo.dirty || correo.touched) && correo.errors}"
        ></ion-input>
        <ion-row class="pe-1">
          <ion-col>
            <ion-input
              formControlName="clave"
              type="text"
              placeholder="Clave"
              class="me-1"
              [ngClass]="{'error-borde mb-0': (clave.dirty || clave.touched) && clave.errors}"
            ></ion-input>
          </ion-col>
          <ion-col>
            <ion-input
              formControlName="claveConfirmada"
              type="text"
              placeholder="Confirmar clave"
              class="ms-1"
              [ngClass]="{'error-borde mb-0': (claveConfirmada.dirty || claveConfirmada.touched) && (claveConfirmada.errors || formRegistro.errors?.noCoinciden)}"
            ></ion-input>
          </ion-col>
        </ion-row>
        <ion-item class="foto">
          <ion-thumbnail slot="start">
            <ion-img
              src="../../assets/user-photo.png"
              style="max-width: 100px; max-height: 100px"
            ></ion-img>
          </ion-thumbnail>
          <ion-button style="--background: rgb(71, 18, 18)"
            ><ion-icon name="camera-outline"></ion-icon
          ></ion-button>
        </ion-item>
        <ion-button type="submit" class="mt-3" style="--background: rgb(15, 145, 58); height: 50px"
          ><ion-icon name="checkmark-circle-outline"></ion-icon>Crear {{perfil}}</ion-button
        >
      </form>
    </ion-grid>
  </div>

  <ion-fab horizontal="end" vertical="bottom">
    <ion-fab-button size="large">
      <img src="../../assets/qr.png" />
    </ion-fab-button>
  </ion-fab>
</ion-content>

<div class="custom-loading" *ngIf="spinner">
  <div class="spinner">
    <div class="double-bounce1">
      <img src="../../assets/Logo.png" style="width: 200px" />
    </div>
    <div class="double-bounce2">
      <img src="../../assets/Logo.png" style="width: 200px" />
    </div>
  </div>
</div>
